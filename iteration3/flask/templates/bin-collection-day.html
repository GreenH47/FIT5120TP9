<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Sun Oct 08 2023 13:03:11 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="650c37c6ab7fbbcc21b11ee5" data-wf-site="64f1bb88ea83ec94b1e823e1">
<head>
  <meta charset="utf-8">
  <title>Bin Collection Day</title>
  <meta content="Bin Collection Day" property="og:title">
  <meta content="Bin Collection Day" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <link rel="shortcut icon" href="images/favicon.png">
  <link href="/static/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/static/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="/static/css/yuhans-cool-site-76ff05.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/geolib"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Varela Round:400","Inconsolata:400,700","Inter:regular,500,600,700","Libre Baskerville:regular,italic,700","Volkhov:regular,italic,700,700italic","Noto Serif:regular,italic,700,700italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
</head>
<body>
  <div data-collapse="small" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="nav-bar w-nav">
    <div class="nav-container w-container">
      <div class="logo-div">
        <a href="index.html" class="nav-logo w-inline-block"><img src="/static/images/logo-no-background.png" width="133" sizes="133px" srcset="/static/images/logo-no-background-p-500.png 500w, images/logo-no-background-p-800.png 800w, images/logo-no-background.png 1000w" alt="" class="logo"></a>
      </div>
      <nav role="navigation" class="nav-content w-nav-menu">
        <div class="search-banner">
          <div class="search-section">
            <form action="/search" class="search w-form"><input type="submit" value="Search" class="hidden w-button"></form>
          </div>
        </div>
        <div class="nav-menu">
          <a href="index.html" class="nav-link w-nav-link">Home</a>
          <a href="know-your-area.html" class="nav-link w-nav-link">Know Your Area</a>
          <a href="find-your-recycler.html" class="nav-link w-nav-link">Find Your Recycler</a>
          <a href="resources.html" class="nav-link w-nav-link">DIY Class</a>
          <a href="sort-your-trash.html" class="nav-link w-nav-link">Sort Your Trash</a>
          <a href="bin-collection-day.html" aria-current="page" class="nav-link w-nav-link w--current">Bin Collection Day</a>
          <a href="quiz-game.html" class="nav-link w-nav-link">Quiz Game</a>
        </div>
        <div class="nav-cta-button-container"></div>
      </nav>
      <div class="menu-button w-nav-button"><img src="/static/images/Menu-Icon.svg" loading="lazy" width="24" alt="" class="menu-icon"></div>
    </div>
  </div>
  <div class="div-block-11"></div>
  <section class="section-5">
    <div>
      <div class="columns-9 w-row">
        <div class="w-col w-col-6">
          <h1 class="heading-23"><strong class="bold-text-12">Bin Collection Day</strong></h1>
          <p class="paragraph-49">Our Bin Collection Day schedule helps you stay in the loop, making sure your waste is whisked away on time, every time, promoting a cleaner and greener environment.</p>
        </div>
        <div class="w-col w-col-6">
          <div class="w-layout-blockcontainer container-9 w-container"><img src="/static/images/Green-wheelie-bins-iStock-810x540.jpg" loading="lazy" sizes="(max-width: 479px) 300px, (max-width: 767px) 500px, (max-width: 991px) 364px, 100vw" srcset="/static/images/Green-wheelie-bins-iStock-810x540-p-500.jpg 500w, images/Green-wheelie-bins-iStock-810x540-p-800.jpg 800w, images/Green-wheelie-bins-iStock-810x540.jpg 810w" alt="" class="image-19"></div>
        </div>
      </div>
    </div>
    <div class="div-block-12"></div>
    <p>Address: </p>
    <input type="text" id="addressInput" placeholder="Enter your address" value="6B Brockhoff Dr, Burwood VIC 3125" class="styled-input">
    <button onclick="searchAddress()" class="search-button">Search</button>
    

    <div id="collect_result" style='margin:0 auto;display:none;'>
      <div id="collect_date" ></div>
    </div>

    <script
          src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.js"></script>
    <link rel="stylesheet"
          href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.css"
          type="text/css">
    <div id="map_container">

      <div id="map"></div>
      <div id="markerList"></div>
    </div>


    <div class="div-block-35 hidden">
      <div class="columns-18 w-row">
        <div class="column-36 w-col w-col-6"><img src="/static/images/IMG_0158.png" loading="lazy" sizes="150px" srcset="/static/images/IMG_0158-p-500.png 500w, images/IMG_0158-p-800.png 800w, images/IMG_0158-p-1080.png 1080w, images/IMG_0158.png 1227w" alt="" class="image-20"></div>
        <div class="column-33 w-col w-col-6">
          <div class="text-block-35">Next Collection date: <span id="green_date"></span><br>‍<br><strong class="bold-text-13">Food (green)</strong> bins are collected <strong><span id="green_frequency"></span></strong></div>
        </div>
      </div>
    </div>
    <div class="div-block-36 hidden">
      <div class="columns-17 w-row">
        <div class="column-37 w-col w-col-6"><img src="/static/images/IMG_0179.png" loading="lazy" sizes="150px" srcset="/static/images/IMG_0179-p-500.png 500w, images/IMG_0179-p-800.png 800w, images/IMG_0179-p-1080.png 1080w, images/IMG_0179.png 1138w" alt="" class="image-21"></div>
        <div class="column-34 w-col w-col-6">
          <div class="text-block-35">Next Collection date: <span id="landfill_date"></span><br>‍<br><strong class="bold-text-1">Landfill (red)</strong> bins are collected <strong><span id="landfill_frequency"></span></strong></div>
        </div>
      </div>
    </div>
    <div class="div-block-37 hidden">
      <div class="w-row">
        <div class="column-38 w-col w-col-6"><img src="/static/images/IMG_0180.png" loading="lazy" sizes="150px" srcset="/static/images/IMG_0180-p-500.png 500w, images/IMG_0180-p-800.png 800w, images/IMG_0180-p-1080.png 1080w, images/IMG_0180.png 1145w" alt="" class="image-22"></div>
        <div class="column-35 w-col w-col-6">
          <div class="text-block-36">Next Collection date: <span id="recycle_date"></span><br>‍<br><strong class="bold-text-16">Recycling (yellow)</strong> bins are collected <strong><span id="recycle_frequency"></span></strong></div>
        </div>
      </div>
    </div>

    <div id="error" class="tooltip" style="display: none;" >
      <p>Address not found, please try again.</p>
    </div>
  </section>
  <div class="div-block-38"></div>
  <div class="footer">
    <div class="footer-container w-container">
      <div class="w-layout-grid footer-grid">
        <div id="w-node-b8d7be4a-ce45-83ab-5947-02d204c8bff0-cf3fcb86" class="footer-logo-block">
          <a data-ix="logo" href="index.html" class="footer-logo w-nav-brand"><img src="/static/images/logo-no-background.png" width="204" sizes="(max-width: 479px) 83vw, 204px" srcset="/static/images/logo-no-background-p-500.png 500w, images/logo-no-background-p-800.png 800w, images/logo-no-background.png 1000w" alt=""></a>
          <p class="paragraph small">Built by <a href="#">Fantastic Nine</a>.<br></p>
          <div class="spacer _16"></div>
          <div class="paragraph small">© 2023 Waste Island. All Rights Reserved.</div>
        </div>
        <div class="footer-links-container">
          <h5 class="footer-header">Website</h5>
          <a href="index.html" class="footer-link">Home</a>
          <a href="know-your-area.html" class="footer-link">Know Your Area</a>
          <a href="find-your-recycler.html" class="footer-link">Find Your Recycler</a>
          <a href="resources.html" class="footer-link">DIY Class</a>
          <a href="sort-your-trash.html" class="footer-link">Sort Your Trash</a>
          <a href="bin-collection-day.html" class="footer-link">Bin Collection Day</a>
          <a href="quiz-game.html" class="footer-link">Quiz Game</a>
        </div>
        <div class="footer-links-container">
          <h5 class="footer-header">Company</h5>
          <a href="copyrights-disclaimers.html" class="footer-link">Copyrights &amp; Disclaimers</a>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=64f1bb88ea83ec94b1e823e1" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/static/js/webflow.js" type="text/javascript"></script>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiZ3JlZW5oIiwiYSI6ImNsOTZ4cXVqaDAzYTAzbnBkOHZrNGhscTYifQ.5CyI_nX9gcLhuYfYpgWC9w';
    navigator.geolocation.getCurrentPosition(success, error);
    //import * as geolib from 'geolib';
    const markers = []; // Array to store all markers
    // Store markers and their waste_type information
    // Store the unique waste_type values in an array
    var uniqueWasteTypes = [];

    // Store the markers and markerList items in separate arrays
    var markerItems = [];


    // check user input address and display on map
    function searchAddress() {
        const address = document.getElementById('addressInput').value;
        const geocodingUrl = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(
                address
                )}.json?access_token=${mapboxgl.accessToken}`;

        fetch(geocodingUrl)
                .then(response => response.json())
                .then(data => {
                    console.log(data)
                    if (data.features.length > 0) {
                        // Get the coordinates of the first result
                        const [longitude, latitude] = data.features[0].center;

                        const map = new mapboxgl.Map({
                            container: 'map',
                            style: 'mapbox://styles/mapbox/streets-v12',
                            center: [longitude, latitude],
                            zoom: 10
                        });

                        new mapboxgl.Marker({
                            color: "red",
                            draggable: true
                        }).setLngLat([longitude, latitude]).addTo(map);

                        map.addControl(
                                new MapboxDirections({
                                    accessToken: mapboxgl.accessToken
                                }),
                                'top-left'
                        );

                        // Extract other information from the response
                        const suburb = data.features[0].context.find(item => item.id.startsWith("locality")).text;
                        const region = data.features[0].context.find(item => item.id.startsWith("region")).text;
                        const street = data.features[0].text;
                        const currentDate = new Date().toISOString().split('T')[0];
                        //const currentDate = "2023-10-30";
                        const formattedResult = {
                            longitude,
                            latitude,
                            suburb,
                            current_date: currentDate,
                            region,
                            street
                        };

                        //console.log(formattedResult);
                        const jsonFormattedResult = JSON.stringify(formattedResult);
                        console.log(jsonFormattedResult);
                        // forwards geocoding to check next collection day
                        check_collect_Day(jsonFormattedResult);

                    } else {
                        console.log('No results found for the entered address.');
                        showErrorTooltip();
                    }
                })
                .catch(error => {
                    console.log('An error occurred while processing the address:', error);
                    showErrorTooltip();
                });
    }

    // check next collection day
    function check_collect_Day(result) {
        var startTime = performance.now();
        //fetch('/api/rest/collect-date', {
        fetch('/api/rest/collect-date', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(result)
        })
                .then(response => response.json())
                .then(data => {

                    var endTime = performance.now();
                    var responseTime = endTime - startTime;
                    console.log("collect Response Time:", responseTime, "ms")

                    let greenFrequency = data.body.green_frequency;
                    let nextGreenDate = data.body.next_green_date;
                    let landfillFrequency = data.body.landfill_frequency;
                    let nextLandfillDate = data.body.next_landfill_date;
                    let recycleFrequency = data.body.recycle_frequency;
                    let nextRecycleDate = data.body.next_recycle_date;


                    document.getElementById("green_date").textContent = nextGreenDate;
                    document.getElementById("green_frequency").textContent = greenFrequency;
                    document.getElementById("landfill_frequency").textContent = landfillFrequency;
                    document.getElementById("landfill_date").textContent = nextLandfillDate;
                    document.getElementById("recycle_frequency").textContent = recycleFrequency;
                    document.getElementById("recycle_date").textContent = nextRecycleDate;

                    console.log(data);
                    const collectDateElement = document.getElementById('collect_date');
                    collectDateElement.textContent = JSON.stringify(data);
                    document.querySelector(".div-block-35").classList.remove("hidden");
                    document.querySelector(".div-block-36").classList.remove("hidden");
                    document.querySelector(".div-block-37").classList.remove("hidden");
                })
                .catch(error => console.error('Error:', error));
    }


    function showErrorTooltip() {
      var errorTooltip = document.getElementById('error');
      errorTooltip.style.display = 'block';

      // Set a timer to hide the tooltip after 2 seconds (2000 milliseconds)
      setTimeout(function() {
        errorTooltip.style.display = 'none';
      }, 2000);
    }


  </script>

</body>
</html>